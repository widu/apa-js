<html>
  <head>
    <title>Practice</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="style.css">
    <!-- <link href="../node_modules/bootstrap/dist/css/bootstrap.css" rel="stylesheet"> -->
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> -->
    <!-- <script src='../node_modules/bootstrap/dist/js/bootstrap.js'></script> -->
    
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script> -->
  </head>
  <body>
    
      <div id="header" >
        <div id="header-content">
          <i>File:</i> <span id="operation-def">null</span>
          <button id="open-dot-file">Open dot file</button>
          <button id="runCommand">Cmd</button>
            <label id="engine">
              <i>Engine:</i>
              <select id="select-engine">
                <option>circo</option>
                <option>dot</option>
                <option>fdp</option>
                <option>neato</option>
                <option>osage</option>
                <option>twopi</option>
              </select>
            </label>
            <input id="dot" hidden />

            <!-- Trigger/Open The Modal -->
          <button id="myBtn">Open Modal</button>

<!-- The Modal -->
          <div id="myModal" class="modal">

  <!-- Modal content -->
            <div class="modal-content">
              <span class="close">&times;</span>
              <h1>The operation definition</h1>
              
              <label for="Choice1"><input type="radio" id="Choice1" name="operation-type" value="Run command">
              Run command</label>
              <label for="Choice2"><input type="radio" id="Choice2" name="operation-type" value="Open file">
              Open dot file</label>

              <label>Command name: <br><input id="command-name" type="text" name="command-name" value="rdf_process"> </label> <br>
              <label>Command paramiter 1: <br><input id="command-param-1" type="text" name="command-param-1" size="90" maxlength="100" value="/Users/wdulek001/Documents/ProcessLibrary/FaktsPresentation/faktspresentation.process"> </label> <button id="get-param-1">File</button><br>
              <label>Command paramiter 2: <br><input id="command-param-2" type="text" name="command-param-2" size="90" maxlength="100" value="filtr2"> </label> <br>
              <label>Command paramiter 3: <br><textarea id="command-param-3" name="command-param-3" rows="4" cols="50">CONSTRUCT { ?s ?p ?o . 
              }
               
                WHERE 
                {  ?s wdc:model_relationship ?o .
               ?s ?p ?o . 
              
               MINUS {
                ?inf a wdc:DerivationRelationship .
               
                ?inf rdf:subject ?s .
                ?inf rdf:predicate ?p .
                ?inf rdf:object ?o .
                ?s wdc:model_relationship ?o .
                ?s ?p ?o .
              }
                
                 }
              </textarea> </label> <br>
              <label>Output dot file: <br><input id="dot-file" type="text" name="dot-file" size="90" maxlength="100" value="/Users/wdulek001/Documents/analiza/ArchiMate/res_graph1.dot"> </label> <br>
            </div>

          </div>

        </div>
        <!-- <ul class="nav navbar-nav">
          <li class="active"><a href="#">Home</a></li>
          <li><a href="#">Page 1</a></li>
          <li><a href="#">Page 2</a></li>
          <li><a href="#">Page 3</a></li>
        </ul> -->

      </div>
   
    
      <!-- <div id="header" class="row" >
        <div id="header-content" class="col-md-12">
          <i>File:</i> dgdsgfgdf gdg sfdsjdfsdhfskhf sfdhksjhfkshfshf sfdhsdfhsdkj fsfdhf kjdshfkssfsjfdsfds  fdjhsfkjshfksjd hf fsdfskfkdshf sfhf skhf
          <label id="engine">
            <i>Engine:</i>
            <select id="select-engine">
              <option>circo</option>
              <option>dot</option>
              <option>fdp</option>
              <option>neato</option>
              <option>osage</option>
              <option>twopi</option>
            </select>
          </label>
          <input id="dot" hidden />
        </div>
      </div> -->
       
       
        <!--
        This is a comment that the browser will ignore.
        It's for humans only.
        -->


            <!-- <div id="options">
              
                
                
            </div> -->
            <div id="output" >
              <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <circle cx="50" cy="50" r="50"/>
              </svg>
              <div id="error"></div>
            </div>
            <div id="left-panel">
              <div class="slidecontainer">
                <span id="demo"></span><br>
                <input type="range" min="0" max="100" value="0" class="slider" id="myRange">
                <!-- <span id="demo"></span> -->
              </div> 
            </div>
            <div id="footer">
              <!-- <div class="slidecontainer">
                - <input type="range" min="0" max="100" value="0" class="slider" id="myRange"> +
                Value: <span id="demo"></span>
              </div> -->
            </div> 

 
   
        <script src="./viz/viz.js"></script>
        <script src="./viz/full.render.js"></script>
        <script>
          // 'digraph { a -> b }'
            require('./renderer');
            var viz = new Viz();
            const dotF = document.getElementById('dot');
            function render(eng, dot) {
            viz.renderSVGElement(dot, {engine: eng, format: "svg"})
            .then(function(element) {
                const output = document.getElementById('output');
                while (output.firstChild) {
                  output.firstChild.remove();
                }
               
                output.appendChild(element);
            //   document.body.appendChild(element);
            })
            .catch(error => {
              // Create a new Viz instance (@see Caveats page for more info)
              viz = new Viz();
          
              // Possibly display the error
              console.error(error);
            });
            }
            var engine = document.getElementById('select-engine');
            renderCallback = () => {
              //  alert("I am an alert box!" + "ss" + engine.value);
              console.log(dotF.value);
               render( engine.value, dotF.value);
               };
            engine.addEventListener("change", renderCallback);
            dotF.addEventListener("change", renderCallback);

          </script>
          <script>
            // Get the modal
            var modal = document.getElementById("myModal");

// Get the button that opens the modal
            var btn = document.getElementById("myBtn");

// Get the <span> element that closes the modal
            var span = document.getElementsByClassName("close")[0];

// When the user clicks on the button, open the modal
            btn.onclick = function() {
              modal.style.display = "block";
            }

            // When the user clicks on <span> (x), close the modal
            span.onclick = function() {
              modal.style.display = "none";
            }

            // When the user clicks anywhere outside of the modal, close it
            // window.onclick = function(event) {
            //   if (event.target == modal) {
            //     modal.style.display = "none";
            //   }
            // }
          </script>
          <script>
            var slider = document.getElementById("myRange");
            var output = document.getElementById("demo");
            
            output.innerHTML = slider.value; // Display the default slider value

            // Update the current slider value (each time you drag the slider handle)
            slider.oninput = function() {
              output.innerHTML = this.value;
              // if (svg === null) {
              var svg = document.querySelector('svg');
                

              size_width = parseInt(this.value) * 19 + 100;
              size_height = parseInt(this.value) * 19 + 100;
              console.log(size_width, " - ", size_height);

              svg.style.width = size_width + "%";
              svg.style.height = size_height + "%";
            }


          </script>
  </body>
</html>